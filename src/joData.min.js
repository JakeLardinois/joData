(function(n){"use strict";var i,r,t;i=function(n){Array.remove||(Array.prototype.remove=function(n,t){if(typeof n!="number"||typeof t!="number")return this;var i=this.slice((t||n)+1||this.length);return this.length=n<0?this.length+n:n,this.push.apply(this,i)}),this.baseUri=n,this.OrderBySettings={Property:null,Order:null,DefaultProperty:null,DefaultOrder:null,toString:function(){var n="$orderby="+(this.Property||this.DefaultProperty);return(this.DefaultOrder!==null||this.Order!==null)&&(n+=" "+(this.Order||this.DefaultOrder)),n},reset:function(){this.Property=null,this.Order=null},isSet:function(){return this.Property!==null||this.DefaultProperty!==null}},this.TopSettings={Top:null,DefaultTop:null,toString:function(){return"$top="+(this.Top!==null?this.Top:this.DefaultTop)},reset:function(){this.Top=null},isSet:function(){return this.Top!==null||this.DefaultTop!==null}},this.SkipSettings={Skip:null,DefaultSkip:null,toString:function(){return"$skip="+(this.Skip!==null?this.Skip:this.DefaultSkip)},reset:function(){this.Skip=null},isSet:function(){return this.Skip!==null||this.DefaultSkip!==null}},this.SelectSettings={Select:null,DefaultSelect:null,toString:function(){var n=this.Select||this.DefaultSelect;return"$select="+n.join(",")},reset:function(){this.Select=null},isSet:function(){return this.Select!==null||this.DefaultSelect!==null}},this.ExpandSettings={Expand:null,DefaultExpand:null,toString:function(){return"$expand="+(this.Expand||this.DefaultExpand)},reset:function(){this.Expand=null},isSet:function(){return this.Expand!==null||this.DefaultExpand!==null}},this.FormatSettings={Format:null,DefaultFormat:null,toString:function(){return"$format="+(this.Format||this.DefaultFormat)},reset:function(){this.Format=null},isSet:function(){return this.Format!==null||this.DefaultFormat!==null}},this.InlineCountSettings={InlineCount:null,DefaultInlineCount:null,toString:function(){return"$inlinecount="+(this.InlineCount||this.DefaultInlineCount)},reset:function(){this.InlineCount=null},isSet:function(){return this.InlineCount!==null||this.DefaultInlineCount!==null}},this.FilterSettings={Filters:[],DefaultFilters:[],CapturedFilter:[],toString:function(){var t,n,i;if(t=[],i="$filter=",this.DefaultFilters.length>0)for(n=0;n<this.DefaultFilters.length;n++)t.push(this.DefaultFilters[n]);for(n=0;n<this.Filters.length;n++)t.push(this.Filters[n]);for(n=0;n<t.length;n++)i+=t[n].toString(n);return i},reset:function(){if(this.Filters=[],this.CapturedFilter.length>0)for(var n=0;n<this.CapturedFilter.length;n++)this.Filters.push(this.CapturedFilter[n])},fullReset:function(){this.Filters=[],this.CapturedFilter=[]},isSet:function(){return this.Filters.length>0||this.DefaultFilters.length>0},loadFromJson:function(n){var t,u,e,o,f;for(o=function(n){for(var e,u=new i.PrecedenceGroup,t=0;t<n.clauses.length;t++)e=n.clauses[t],u.clauses.push(new r(f(e.filterObj),e.logicalOperator));return u},f=function(n){if(n.clauses!==undefined)return o(n);var t;e=new i.FilterClause;for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},t=0;t<n.Filters.length;t++)u=n.Filters[t],this.Filters.push(new r(f(u.filterObj),u.logicalOperator));for(t=0;t<n.DefaultFilters.length;t++)u=n.DefaultFilters[t],this.DefaultFilters.push(new r(f(u.filterObj),u.logicalOperator))}}},i.prototype={baseUri:"",currentHashRoute:"",updateHashRoute:function(n){this.currentHashRoute=n},setOrderByDefault:function(n,t){return this.OrderBySettings.DefaultProperty=n,this.OrderBySettings.DefaultOrder=t===undefined?"desc":t,this},toggleOrderBy:function(n,t){var i=this.OrderBySettings.Property===null||this.OrderBySettings.Order==="asc";return this.orderBy(n)[i?"desc":"asc"](),t&&typeof t=="function"&&t.call(this),this},orderBy:function(n){return this.OrderBySettings.Property=n,this},desc:function(){return this.OrderBySettings.Order="desc",this},asc:function(){return this.OrderBySettings.Order="asc",this},resetOrderBy:function(){return this.OrderBySettings.reset(),this},setTopDefault:function(n){return this.TopSettings.DefaultTop=n,this},top:function(n){return this.TopSettings.Top=n,this},resetTop:function(){return this.TopSettings.reset(),this},setSkipDefault:function(n){return this.SkipSettings.DefaultSkip=n,this},skip:function(n){return this.SkipSettings.Skip=n,this},resetSkip:function(){return this.SkipSettings.reset(),this},setSelectDefault:function(n){return this.SelectSettings.DefaultSelect=n,this},select:function(n){return this.SelectSettings.Select=n,this},resetSelect:function(){return this.SelectSettings.reset(),this},setExpandDefault:function(n){return this.ExpandSettings.DefaultExpand=n,this},expand:function(n){return this.ExpandSettings.Expand=n,this},resetExpand:function(){this.ExpandSettings.reset()},formatDefault:function(){var n=this;return this.atom=function(){return n.FormatSettings.DefaultFormat="atom",n},this.xml=function(){return n.FormatSettings.DefaultFormat="xml",n},this.json=function(){return n.FormatSettings.DefaultFormat="json",n},this.custom=function(t){return n.FormatSettings.DefaultFormat=t,n},n},format:function(){var n=this;return this.atom=function(){return n.FormatSettings.Format="atom",n},this.xml=function(){return n.FormatSettings.Format="xml",n},this.json=function(){return n.FormatSettings.Format="json",n},this.custom=function(t){return n.FormatSettings.Format=t,n},this},resetFormat:function(){this.FormatSettings.reset()},inlineCountDefault:function(){var n=this;return this.allPages=function(){return n.InlineCountSettings.DefaultInlineCount="allpages",n},this.none=function(){return n.InlineCountSettings.DefaultInlineCount="none",n},this},inlineCount:function(){var n=this;return this.allPages=function(){return n.InlineCountSettings.InlineCount="allpages",n},this.none=function(){return n.InlineCountSettings.InlineCount="none",n},this},resetInlineCount:function(){return this.InlineCountSettings.reset(),this},captureFilter:function(){this.FilterSettings.CapturedFilter=[];for(var n=0;n<this.FilterSettings.Filters.length;n++)this.FilterSettings.CapturedFilter.push(this.FilterSettings.Filters[n])},resetFilter:function(){return this.FilterSettings.fullReset(),this},resetToCapturedFilter:function(){return this.FilterSettings.reset(),this},removeFilter:function(n){var t;if(!this.FilterSettings.isSet())return this;for(t=0;t<this.FilterSettings.Filters.length;t++)this.FilterSettings.Filters[t].filterObj.Property===n&&this.FilterSettings.Filters.splice(t,1);return this},defaultFilter:function(n){return this.FilterSettings.DefaultFilters.push(new r(n)),this},defaultAndFilter:function(n){return this.FilterSettings.DefaultFilters.push(new r(n,"and")),this},defaultOrFilter:function(n){return this.FilterSettings.DefaultFilters.push(new r(n,"or")),this},filter:function(n){return this.FilterSettings.Filters.push(new r(n)),this},andFilter:function(n){return this.FilterSettings.Filters.push(new r(n,"and")),this},orFilter:function(n){return this.FilterSettings.Filters.push(new r(n,"or")),this},toString:function(){var t,n;return t=this.baseUri,n=[],this.OrderBySettings.isSet()&&n.push(this.OrderBySettings.toString()),this.TopSettings.isSet()&&n.push(this.TopSettings.toString()),this.SkipSettings.isSet()&&n.push(this.SkipSettings.toString()),this.SelectSettings.isSet()&&n.push(this.SelectSettings.toString()),this.FilterSettings.isSet()&&n.push(this.FilterSettings.toString()),this.ExpandSettings.isSet()&&n.push(this.ExpandSettings.toString()),this.FormatSettings.isSet()&&n.push(this.FormatSettings.toString()),this.InlineCountSettings.isSet()&&n.push(this.InlineCountSettings.toString()),n.length>0?t+"?"+n.join("&"):t},toJson:function(){var n={};return n.baseUri=this.baseUri,n.currentHashRoute=this.currentHashRoute,n.OrderBySettings=null,n.TopSettings=null,n.SkipSettings=null,n.SelectSettings=null,n.ExpandSettings=null,n.FormatSettings=null,n.InlineCountSettings=null,n.FilterSettings=null,n.defaults=this.defaults,this.OrderBySettings.isSet()&&(n.OrderBySettings=this.OrderBySettings),this.TopSettings.isSet()&&(n.TopSettings=this.TopSettings),this.SkipSettings.isSet()&&(n.SkipSettings=this.SkipSettings),this.SelectSettings.isSet()&&(n.SelectSettings=this.SelectSettings),this.ExpandSettings.isSet()&&(n.ExpandSettings=this.ExpandSettings),this.FormatSettings.isSet()&&(n.FormatSettings=this.FormatSettings),this.InlineCountSettings.isSet()&&(n.InlineCountSettings=this.InlineCountSettings),this.FilterSettings.isSet()&&(n.FilterSettings=this.FilterSettings),JSON.stringify(n)},saveLocal:function(n){var t,i;t=this.toJson(),i=n||"joData.StorageKey",localStorage.setItem(i,t)}},i.loadLocal=function(n){var e,f,t,u,r;if(e=n||"joData.StorageKey",f=localStorage.getItem(e),f===null)return console.log("Nothing was found in localStorage"),null;if(t=JSON.parse(f),u=new i(t.baseUri),u.currentHashRoute=t.currentHashRoute,t.OrderBySettings!==null)for(r in t.OrderBySettings)t.OrderBySettings.hasOwnProperty(r)&&(u.OrderBySettings[r]=t.OrderBySettings[r]);if(t.TopSettings!==null)for(r in t.TopSettings)t.TopSettings.hasOwnProperty(r)&&(u.TopSettings[r]=t.TopSettings[r]);if(t.SkipSettings!==null)for(r in t.SkipSettings)t.SkipSettings.hasOwnProperty(r)&&(u.SkipSettings[r]=t.SkipSettings[r]);if(t.SelectSettings!==null)for(r in t.SelectSettings)t.SelectSettings.hasOwnProperty(r)&&(u.SelectSettings[r]=t.SelectSettings[r]);if(t.ExpandSettings!==null)for(r in t.ExpandSettings)t.ExpandSettings.hasOwnProperty(r)&&(u.ExpandSettings[r]=t.ExpandSettings[r]);if(t.FormatSettings!==null)for(r in t.FormatSettings)t.FormatSettings.hasOwnProperty(r)&&(u.FormatSettings[r]=t.FormatSettings[r]);if(t.InlineCountSettings!==null)for(r in t.InlineCountSettings)t.InlineCountSettings.hasOwnProperty(r)&&(u.InlineCountSettings[r]=t.InlineCountSettings[r]);return t.FilterSettings!==null&&u.FilterSettings.loadFromJson(t.FilterSettings),u},r=function(n,t){return this.filterObj=n,this.logicalOperator=null,t!==undefined&&t!==null&&(this.logicalOperator=t),this},r.prototype={filterObj:null,logicalOperator:null,toString:function(n){var t="";return this.logicalOperator!==null&&n>0?t+=" "+this.logicalOperator+" ":n>0&&this.logicalOperator===null&&(t+=" and "),t+this.filterObj.toString()}},i.PrecedenceGroup=function(n){if(!n instanceof i.FilterClause)throw"filterClause must be of type joData.FilterClause!";return this.clauses=[],n!==undefined&&this.clauses.push(new r(n)),this},i.PrecedenceGroup.prototype={clauses:[],andFilter:function(n){if(!n instanceof i.FilterClause)throw"filterClause must be of type joData.FilterClause!";return this.clauses.push(new r(n,"and")),this},orFilter:function(n){if(!n instanceof i.FilterClause)throw"filterClause must be of type joData.FilterClause!";return this.clauses.push(new r(n,"or")),this},toString:function(){for(var t="(",n=0;n<this.clauses.length;n++)t+=this.clauses[n].toString(n);return t+")"}},n.literal=function(n){return"'"+n.toString()+"'"},n.datetime=function(n){return"datetime'"+n+"'"},n.decimal=function(n){return n+"m"},n.guid=function(n){return"guid'"+n+"'"},n.single=function(n){return n+"f"},n.double=function(n){return n+"d"},i.Concat=function(n,t){return this.LeftSide=n,this.RightSide=t,this},i.Concat.prototype={LeftSide:null,RightSide:null,toString:function(){function n(n){return typeof n=="object"?n.toString():typeof n=="function"?n.call(t):n.toString()}var t=this;return"concat("+n(this.LeftSide)+","+n(this.RightSide)+")"}},i.FilterClause=function(n){return this.Property=n,this.Components=[],this},i.FilterClause.prototype={Property:null,Value:null,IsClauseEmpty:!0,PropertyIncluded:!1,UsingNot:!1,FuncReturnType:null,transformFunc:null,Components:[],toString:function(){var n,t,i;for(n=[],this.PropertyIncluded||n.push(this.Property),t=0;t<this.Components.length;t++)n.push(this.Components[t]);return(i=n.join(" "),!this.UsingNot)?i:typeof this.FuncReturnType=="boolean"?"not "+i:"not ("+i+")"},isEmpty:function(){return this.IsClauseEmpty||this.PropertyIncluded&&this.UsingNot},add:function(n){return t.addArithmeticOperator(n,"add",this)},sub:function(n){return t.addArithmeticOperator(n,"sub",this)},mul:function(n){return t.addArithmeticOperator(n,"mul",this)},div:function(n){return t.addArithmeticOperator(n,"div",this)},mod:function(n){return t.addArithmeticOperator(n,"mod",this)},eq:function(n){return t.addLogicalOperator(n,"eq",this)},ne:function(n){return t.addLogicalOperator(n,"ne",this)},gt:function(n){return t.addLogicalOperator(n,"gt",this)},ge:function(n){return t.addLogicalOperator(n,"ge",this)},lt:function(n){return t.addLogicalOperator(n,"lt",this)},le:function(n){return t.addLogicalOperator(n,"le",this)},not:function(){return this.UsingNot=!0,this},substringof:function(n){this.PropertyIncluded=!0,this.FuncReturnType=Boolean();var i=this,t=this.Property;return this.transformFunc!==null&&(t=this.Components[this.Components.length-1],this.Components.splice(this.Components.length-1,1)),this.Components.push("substringof('"+n+"',"+t+")"),this},endswith:function(n){this.PropertyIncluded=!0,this.FuncReturnType=Boolean();var t=this;return this.Components.push("endswith("+t.Property+",'"+n+"')"),this},startswith:function(n){this.PropertyIncluded=!0,this.FuncReturnType=Boolean();var t=this;return this.Components.push("startswith("+t.Property+",'"+n+"')"),this},length:function(){this.PropertyIncluded=!0,this.FuncReturnType=Number();var n=this;return this.Components.push("length("+n.Property+")"),this},indexof:function(n){this.PropertyIncluded=!0,this.FuncReturnType=Number();var t=this;return this.Components.push("indexof("+t.Property+",'"+n+"')"),this},replace:function(n,t){this.PropertyIncluded=!0,this.FuncReturnType=String();var i=this;return this.Components.push("replace("+i.Property+",'"+n+"','"+t+"')"),this},substring:function(n,t){this.PropertyIncluded=!0,this.FuncReturnType=String();var i=[this.Property,n];return t!==undefined&&i.push(t),this.Components.push("substring("+i.join(",")+")"),this},toLower:function(){this.PropertyIncluded=!0,this.FuncReturnType=String();var n=this;return this.transformFunc=this.toLower,this.Components.push("tolower("+n.Property+")"),this},toUpper:function(){this.PropertyIncluded=!0,this.FuncReturnType=String();var n=this;return this.transformFunc=this.toUpper,this.Components.push("toupper("+n.Property+")"),this},trim:function(){this.PropertyIncluded=!0,this.FuncReturnType=String();var n=this;return this.transformFunc=this.trim,this.Components.push("trim("+n.Property+")"),this},Concat:function(n){this.PropertyIncluded=!0,this.FuncReturnType=String();var t=this;return t.Components.push(n.toString()),this},day:function(){return t.addMethodWrapper(this,"day")},hour:function(){return t.addMethodWrapper(this,"hour")},minute:function(){return t.addMethodWrapper(this,"minute")},month:function(){return t.addMethodWrapper(this,"month")},second:function(){return t.addMethodWrapper(this,"second")},year:function(){return t.addMethodWrapper(this,"year")},round:function(){return t.addMethodWrapper(this,"round")},floor:function(){return t.addMethodWrapper(this,"floor")},ceiling:function(){return t.addMethodWrapper(this,"ceiling")}},t={formatValue:function(n){var i,t,r,u;if(n.length>8&&n.substring(0,8)==="datetime"||n.length>4&&n.substring(0,4)==="guid")return n;if(typeof n=="string"){for(i=["m","f","d"],t=0;t<i.length;t++)if(r=i[t],n.indexOf(r,n.length-r.length)!==-1&&(u=n.substring(0,n.length-1),!isNaN(u)))return n;return"'"+n+"'"}return n},addLogicalOperator:function(n,t,i){return i.Value=n,i.IsClauseEmpty=!1,i.Components.push(t+" "+this.formatValue(n)),i},addArithmeticOperator:function(n,t,i){return i.Components.push(t+" "+n),i},addMethodWrapper:function(n,t){n.PropertyIncluded=!0,n.FuncReturnType=Number();var i=n;return n.Components.push(t+"("+i.Property+")"),n}},n.joData=i})(window);
//@ sourceMappingURL=joData.min.js.map